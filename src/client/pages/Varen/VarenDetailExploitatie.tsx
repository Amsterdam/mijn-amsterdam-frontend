import {
  ActionGroup,
  Grid,
  GridColumnNumber,
  Icon,
} from '@amsterdam/design-system-react';
import { ExternalLinkIcon } from '@amsterdam/design-system-react-icons';

import { CONTENT_EMPTY } from './helper';
import styles from './Varen.module.scss';
import type {
  VarenFrontend,
  VarenVergunningExploitatie,
} from '../../../server/services/varen/config-and-types';
import { ButtonLinkProps } from '../../../universal/types';
import { Datalist, RowSet } from '../../components/Datalist/Datalist';
import { MaButtonLink } from '../../components/MaLink/MaLink';

type VarenDetailPageContentProps = {
  vergunning: VarenFrontend<VarenVergunningExploitatie>;
  buttonItems: ButtonLinkProps[];
};

const DEFAULT_GRID_SPAN: GridColumnNumber = 4;
export function VarenDetailPageContentExploitatie({
  vergunning,
  buttonItems,
}: VarenDetailPageContentProps) {
  const rows: RowSet[] = [
    {
      rows: [
        {
          label: 'Zaaknummer',
          content: vergunning.identifier,
          span: DEFAULT_GRID_SPAN,
        },
        {
          label: 'Resultaat',
          content: vergunning.processed ? vergunning.decision : CONTENT_EMPTY,
          span: DEFAULT_GRID_SPAN,
        },
      ],
    },
    {
      rows: [
        {
          label: 'Naam vaartuig',
          content: vergunning.vesselName,
          span: DEFAULT_GRID_SPAN,
        },
        {
          label: 'Segment',
          content: vergunning.segment,
          span: DEFAULT_GRID_SPAN,
        },
      ],
    },
    {
      rows: [
        {
          label: 'Lengte vaartuig',
          content: vergunning.vesselLength
            ? `${vergunning.vesselLength} meter`
            : CONTENT_EMPTY,
          span: DEFAULT_GRID_SPAN,
        },
        {
          label: 'Breedte vaartuig',
          content: vergunning.vesselWidth
            ? `${vergunning.vesselWidth} meter`
            : CONTENT_EMPTY,
          span: DEFAULT_GRID_SPAN,
        },
      ],
    },
    {
      rows: [
        {
          label: 'Hoogte vaartuig',
          content: vergunning.vesselHeight
            ? `${vergunning.vesselHeight} meter`
            : CONTENT_EMPTY,
          span: DEFAULT_GRID_SPAN,
        },
        {
          label: 'Diepgang vaartuig',
          content: vergunning.vesselDepth
            ? `${vergunning.vesselDepth} meter`
            : CONTENT_EMPTY,
          span: DEFAULT_GRID_SPAN,
        },
      ],
    },
    {
      rows: [
        {
          label: 'Aantal verschijningsvormen',
          content: vergunning.formAppearance,
          span: DEFAULT_GRID_SPAN,
        },
        {
          label: 'Aantal zitplaatsen',
          content: vergunning.numberOfSeats,
          span: DEFAULT_GRID_SPAN,
        },
      ],
    },
    {
      rows: [
        {
          label: 'Vergunningkenmerk',
          content: vergunning.permitReference || CONTENT_EMPTY,
          span: DEFAULT_GRID_SPAN,
        },
        {
          label: 'ENI-nummer',
          content: vergunning.eniNumber || CONTENT_EMPTY,
          span: DEFAULT_GRID_SPAN,
        },
      ],
    },
  ];

  return (
    <>
      <Grid.Cell span="all">
        <Datalist rows={rows} className={styles.VarenGridWithoutRowGap} />
      </Grid.Cell>
      {buttonItems?.length > 0 && (
        <Grid.Cell span="all">
          <ActionGroup>
            {buttonItems.map(({ to, title, isDisabled }) => (
              <MaButtonLink
                key={to}
                href={to}
                isDisabled={isDisabled}
                variant="secondary"
                className={styles.VarenButton}
              >
                {title}
                <Icon svg={ExternalLinkIcon} size="level-5" />
              </MaButtonLink>
            ))}
          </ActionGroup>
        </Grid.Cell>
      )}
    </>
  );
}
