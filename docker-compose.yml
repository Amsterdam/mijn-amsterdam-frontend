version: '3.5'
services:
  # Unit testing
  test-unit-bff:
    build:
      context: .
      dockerfile: Dockerfile
      target: build-deps
    environment:
      - BFF_DISABLE_MOCK_ADAPTER=true
      - BFF_REQUEST_CACHE_ENABLED=false
      - TZ=Europe/Amsterdam
    entrypoint: npm run bff-api:test

  test-unit-client:
    build:
      context: .
      dockerfile: Dockerfile
      target: build-deps
    environment:
      - BFF_DISABLE_MOCK_ADAPTER=true
      - BFF_REQUEST_CACHE_ENABLED=false
      - TZ=Europe/Amsterdam
    entrypoint: npm test
